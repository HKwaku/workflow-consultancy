<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free AI Diagnostic | Workflow Partners</title>
    <meta name="description" content="8-minute AI-powered workflow diagnostic. Discover hidden inefficiencies and get a data-driven transformation plan.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #1a2f4a;
            --primary-light: #2a4a6b;
            --accent: #3d8ea6;
            --accent-light: #5bb8d4;
            --dark: #0c1b2e;
            --text: #1e293b;
            --text-mid: #475569;
            --text-light: #64748b;
            --bg: #fafbfc;
            --bg-alt: #f1f5f9;
            --white: #ffffff;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --success: #16a34a;
            --success-bg: rgba(22,163,74,0.06);
            --warn: #f59e0b;
            --warn-bg: #fffbeb;
            --danger: #ef4444;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 20px rgba(0,0,0,0.06);
            --shadow-lg: 0 12px 40px rgba(0,0,0,0.08);
            --radius-sm: 8px;
            --radius-md: 14px;
            --radius-lg: 20px;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            color: var(--text);
            line-height: 1.65;
            background: var(--bg);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        h1, h2, h3, h4 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            line-height: 1.15;
            color: var(--dark);
        }

        /* ===== Top Bar ===== */
        .top-bar {
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(226,232,240,0.6);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .top-bar-inner {
            max-width: 800px;
            margin: 0 auto;
            padding: 0.9rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .top-bar a {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .top-bar-badge {
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--accent);
            background: rgba(61,142,166,0.08);
            padding: 4px 12px;
            border-radius: 999px;
        }

        /* ===== Progress ===== */
        .progress-wrap {
            background: var(--white);
            border-bottom: 1px solid var(--border-light);
            position: sticky;
            top: 50px;
            z-index: 99;
        }

        .progress-inner {
            max-width: 800px;
            margin: 0 auto;
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-bar-track {
            flex: 1;
            height: 4px;
            background: var(--border-light);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            border-radius: 4px;
            transition: width 0.4s cubic-bezier(0.16,1,0.3,1);
            width: 0%;
        }

        .progress-text {
            font-size: 0.75rem;
            color: var(--text-light);
            font-weight: 600;
            white-space: nowrap;
            min-width: 80px;
            text-align: right;
        }

        /* ===== Page Layout ===== */
        .page-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2.5rem 1.5rem 4rem;
        }

        /* ===== Hero ===== */
        .diag-hero {
            text-align: center;
            margin-bottom: 2.5rem;
            padding: 2.5rem 1.5rem;
            background: var(--white);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .diag-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(61,142,166,0.06) 0%, transparent 70%);
            pointer-events: none;
        }

        .diag-hero h1 {
            font-size: 2.4rem;
            margin-bottom: 0.5rem;
            position: relative;
            letter-spacing: -0.5px;
        }

        .diag-hero-sub {
            font-size: 1rem;
            color: var(--text-light);
            max-width: 520px;
            margin: 0 auto 1.5rem;
            line-height: 1.65;
        }

        .diag-hero-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            position: relative;
        }

        .diag-hero-stat {
            text-align: center;
        }

        .diag-hero-stat strong {
            display: block;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary);
        }

        .diag-hero-stat span {
            font-size: 0.78rem;
            color: var(--text-light);
        }

        /* ===== Section (step) ===== */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: sectionIn 0.4s cubic-bezier(0.16,1,0.3,1);
        }

        @keyframes sectionIn {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            padding: 2.25rem 2rem;
            margin-bottom: 1rem;
        }

        .section-num {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            color: var(--accent);
            font-weight: 700;
            margin-bottom: 0.4rem;
        }

        .section-card h2 {
            font-size: 1.65rem;
            margin-bottom: 0.35rem;
            letter-spacing: -0.3px;
        }

        .section-card > p {
            font-size: 0.88rem;
            color: var(--text-light);
            margin-bottom: 1.75rem;
            line-height: 1.6;
        }

        /* ===== Form Elements ===== */
        .question-group {
            margin-bottom: 1.5rem;
        }

        .question-group:last-child {
            margin-bottom: 0;
        }

        .question-label {
            font-weight: 600;
            font-size: 0.92rem;
            color: var(--text);
            margin-bottom: 0.3rem;
        }

        .question-help {
            font-size: 0.82rem;
            color: var(--text-light);
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-label {
            display: block;
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text-mid);
            margin-bottom: 0.35rem;
            letter-spacing: 0.1px;
        }

        input[type="text"],
        input[type="email"],
        input[type="number"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 0.7rem 0.9rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 0.9rem;
            color: var(--text);
            background: var(--white);
            transition: border-color 0.2s, box-shadow 0.2s;
            -webkit-appearance: none;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(61,142,166,0.1);
        }

        input::placeholder,
        textarea::placeholder {
            color: #a0aec0;
        }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2364748b' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 2.25rem;
        }

        /* Slider / Range */
        input[type="range"] {
            width: 100%;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: var(--border-light);
            outline: none;
            border: none;
            box-shadow: none;
            margin: 0.5rem 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: 3px solid var(--white);
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .range-value {
            text-align: center;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        /* Inline unit */
        .input-with-unit {
            position: relative;
        }

        .input-with-unit input {
            padding-right: 4rem;
        }

        .input-unit {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            color: var(--text-light);
            pointer-events: none;
        }

        /* Radio / Option cards */
        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 0.6rem;
            margin-top: 0.5rem;
        }

        .option-card {
            display: block;
            cursor: pointer;
        }

        .option-card input[type="radio"] {
            display: none;
        }

        .option-card .option-inner {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-mid);
            transition: all 0.2s cubic-bezier(0.16,1,0.3,1);
            font-weight: 500;
        }

        .option-card input[type="radio"]:checked + .option-inner {
            border-color: var(--accent);
            background: rgba(61,142,166,0.06);
            color: var(--primary);
            font-weight: 600;
            box-shadow: 0 0 0 2px rgba(61,142,166,0.15);
        }

        .option-card:hover .option-inner {
            border-color: var(--accent);
            background: rgba(61,142,166,0.03);
        }

        /* Checkbox grid */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.6rem;
            margin-top: 0.5rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            padding: 0.7rem 0.9rem;
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.16,1,0.3,1);
        }

        .checkbox-label:hover {
            border-color: var(--accent);
            background: rgba(61,142,166,0.03);
        }

        .checkbox-label input[type="checkbox"] {
            width: 17px;
            height: 17px;
            margin-right: 0.65rem;
            cursor: pointer;
            accent-color: var(--primary);
            flex-shrink: 0;
        }

        .checkbox-label input[type="checkbox"]:checked + .checkbox-text {
            color: var(--primary);
            font-weight: 600;
        }

        .checkbox-text {
            font-size: 0.85rem;
            color: var(--text-mid);
        }

        /* Workflow input blocks */
        .workflow-input-block {
            background: var(--bg);
            padding: 1.25rem;
            border-radius: var(--radius-md);
            margin-bottom: 0.75rem;
            border: 1px solid var(--border-light);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .workflow-input-block:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(61,142,166,0.06);
        }

        .workflow-input-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        /* Tool consent cards */
        .tool-consent-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-top: 0.75rem;
        }

        .tool-consent-card {
            position: relative;
            display: block;
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.16,1,0.3,1);
        }

        .tool-consent-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .tool-consent-card input[type="checkbox"] {
            position: absolute;
            top: 0.9rem;
            right: 0.9rem;
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .tool-consent-card input[type="checkbox"]:checked ~ .tool-consent-content {
            opacity: 1;
        }

        .tool-consent-content {
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .tool-consent-card:hover .tool-consent-content { opacity: 1; }

        .tool-consent-header {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            margin-bottom: 0.4rem;
        }

        .tool-consent-icon { font-size: 1.5rem; }

        .tool-consent-name {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--primary);
        }

        .tool-consent-description {
            font-size: 0.82rem;
            color: var(--text-light);
            line-height: 1.5;
            margin-bottom: 0.6rem;
        }

        .tool-consent-badge {
            display: inline-block;
            padding: 2px 8px;
            background: var(--success-bg);
            color: var(--success);
            border-radius: 999px;
            font-size: 0.72rem;
            font-weight: 700;
            letter-spacing: 0.3px;
        }

        /* Consent hero */
        .consent-hero {
            text-align: center;
            padding: 2rem 1.5rem;
            background: linear-gradient(135deg, rgba(61,142,166,0.05) 0%, var(--bg-alt) 100%);
            border-radius: var(--radius-md);
            margin-bottom: 1.5rem;
            border: 1px solid rgba(61,142,166,0.08);
        }

        .consent-icon { font-size: 2.8rem; margin-bottom: 0.5rem; }

        .consent-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            color: var(--primary);
            margin-bottom: 0.4rem;
            font-weight: 700;
        }

        .consent-subtitle {
            font-size: 0.9rem;
            color: var(--text-light);
            max-width: 480px;
            margin: 0 auto;
            line-height: 1.55;
        }

        /* Privacy notice */
        .privacy-notice {
            display: flex;
            gap: 0.75rem;
            background: var(--warn-bg);
            padding: 1.1rem;
            border-radius: var(--radius-sm);
            margin-top: 1rem;
            border: 1px solid rgba(245,158,11,0.15);
            border-left: 3px solid var(--warn);
        }

        .privacy-icon { font-size: 1.4rem; flex-shrink: 0; }

        .privacy-content {
            font-size: 0.82rem;
            color: var(--text-light);
            line-height: 1.55;
        }

        .privacy-content strong {
            color: #92400e;
            display: block;
            margin-bottom: 0.35rem;
            font-size: 0.84rem;
        }

        .privacy-content ul { margin-left: 1rem; margin-top: 0.25rem; }
        .privacy-content li { margin-bottom: 0.15rem; }

        /* Alternative option */
        .alternative-option {
            background: var(--bg);
            padding: 1.1rem;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-light);
            border-left: 3px solid var(--accent);
        }

        .alternative-header {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 0.4rem;
            font-size: 0.92rem;
            color: var(--primary);
        }

        .alternative-icon { font-size: 1.2rem; }

        .alternative-option p {
            color: var(--text-light);
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        /* ===== Buttons ===== */
        .button-group {
            display: flex;
            justify-content: space-between;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .button {
            padding: 0.75rem 1.75rem;
            border-radius: 999px;
            font-family: inherit;
            font-size: 0.88rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.16,1,0.3,1);
            border: none;
            letter-spacing: 0.2px;
        }

        .button-primary {
            background: var(--primary);
            color: var(--white);
        }

        .button-primary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(26,47,74,0.2);
        }

        .button-secondary {
            background: transparent;
            color: var(--text-mid);
            border: 1px solid var(--border);
        }

        .button-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .button-submit {
            background: linear-gradient(135deg, var(--accent), var(--primary));
            color: var(--white);
            padding: 0.85rem 2.25rem;
            font-size: 0.95rem;
        }

        .button-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(61,142,166,0.3);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* ===== Loading ===== */
        .loading-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(8px);
            z-index: 200;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 1.5rem;
        }

        .loading-overlay.visible {
            display: flex;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1rem;
            color: var(--text-mid);
            font-weight: 500;
        }

        .loading-sub {
            font-size: 0.82rem;
            color: var(--text-light);
        }

        /* ===== Results ===== */
        #results {
            display: none;
        }

        #results.visible {
            display: block;
            animation: sectionIn 0.5s cubic-bezier(0.16,1,0.3,1);
        }

        .result-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .result-header h2 {
            font-size: 2rem;
            margin-bottom: 0.4rem;
        }

        .result-header p {
            color: var(--text-light);
            font-size: 0.92rem;
        }

        .score-ring {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 6px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }

        .score-ring-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .result-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 1.75rem;
            margin-bottom: 1rem;
        }

        .result-card h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .result-card p, .result-card li {
            font-size: 0.9rem;
            color: var(--text-mid);
            line-height: 1.6;
        }

        .result-card ul {
            list-style: none;
            padding: 0;
        }

        .result-card ul li {
            padding: 0.4rem 0;
            padding-left: 1.25rem;
            position: relative;
        }

        .result-card ul li::before {
            content: 'â†’';
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: 700;
        }

        .cost-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-top: 0.75rem;
        }

        .cost-item {
            background: var(--bg);
            padding: 1rem;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-light);
        }

        .cost-item-label {
            font-size: 0.78rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-bottom: 0.2rem;
        }

        .cost-item-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary);
        }

        .urgency-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 999px;
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .urgency-badge.critical { background: rgba(239,68,68,0.08); color: var(--danger); }
        .urgency-badge.high { background: rgba(245,158,11,0.08); color: #d97706; }
        .urgency-badge.medium { background: rgba(61,142,166,0.08); color: var(--accent); }
        .urgency-badge.low { background: var(--success-bg); color: var(--success); }

        .phase-card {
            background: var(--bg);
            border-radius: var(--radius-sm);
            padding: 1.1rem;
            margin-bottom: 0.6rem;
            border: 1px solid var(--border-light);
        }

        .phase-num {
            font-size: 0.68rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.15rem;
        }

        .phase-card h4 {
            font-size: 1.05rem;
            margin-bottom: 0.2rem;
            font-family: 'Work Sans', sans-serif;
            font-weight: 600;
        }

        .phase-card p {
            font-size: 0.84rem;
            color: var(--text-light);
        }

        /* Mapping status */
        .mapping-status-section {
            background: var(--white);
            border-radius: var(--radius-md);
            padding: 1.75rem;
            margin-top: 1rem;
            border: 1px solid var(--border);
            border-left: 3px solid var(--accent);
        }

        .status-header { text-align: center; margin-bottom: 1.25rem; }
        .status-header h2 { font-size: 1.4rem; margin-bottom: 0.3rem; }
        .status-header p { color: var(--text-light); font-size: 0.85rem; }

        .status-timeline { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1.25rem; }

        .status-step {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--bg);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-light);
        }

        .status-step.complete { background: var(--success-bg); border-color: rgba(22,163,74,0.1); }
        .status-step.pending { opacity: 0.55; }

        .status-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            background: var(--white);
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }

        .status-title { font-weight: 600; color: var(--primary); font-size: 0.88rem; margin-bottom: 0.1rem; }
        .status-time { font-size: 0.78rem; color: var(--text-light); }

        .what-to-expect {
            background: rgba(61,142,166,0.04);
            padding: 1.1rem;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
            border: 1px solid rgba(61,142,166,0.08);
        }

        .what-to-expect h3 { font-size: 1.05rem; margin-bottom: 0.5rem; }
        .what-to-expect ul { list-style: none; padding: 0; }
        .what-to-expect li { padding: 0.3rem 0; font-size: 0.85rem; color: var(--text); }

        .workflow-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }

        .workflow-tag {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 0.85rem;
            background: var(--bg);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-size: 0.85rem;
        }

        .workflow-name { font-weight: 600; color: var(--primary); }
        .workflow-type {
            font-size: 0.72rem;
            color: var(--text-light);
            padding: 2px 6px;
            background: var(--white);
            border-radius: 4px;
        }

        /* ===== Footer ===== */
        .diag-footer {
            text-align: center;
            padding: 2rem 1.5rem;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .diag-footer a {
            color: var(--accent);
            text-decoration: none;
        }

        /* ===== Responsive ===== */
        @media (max-width: 768px) {
            .page-container { padding: 1.5rem 1rem 3rem; }
            .section-card { padding: 1.5rem 1.25rem; }
            .input-row { grid-template-columns: 1fr; }
            .workflow-input-row { grid-template-columns: 1fr; }
            .tool-consent-grid { grid-template-columns: 1fr; }
            .cost-grid { grid-template-columns: 1fr; }
            .checkbox-grid { grid-template-columns: 1fr; }
            .option-grid { grid-template-columns: 1fr 1fr; }
            .diag-hero h1 { font-size: 1.9rem; }
            .diag-hero-stats { gap: 1.25rem; }
            .diag-hero-stat strong { font-size: 1.3rem; }
            .button-group { flex-wrap: wrap; }
            .button { flex: 1; min-width: 120px; text-align: center; }
            .privacy-notice { flex-direction: column; }
        }

        @media (max-width: 480px) {
            .diag-hero { padding: 1.75rem 1rem; }
            .diag-hero h1 { font-size: 1.65rem; }
            .diag-hero-stats { flex-direction: column; gap: 0.75rem; }
            .option-grid { grid-template-columns: 1fr; }
            .section-card h2 { font-size: 1.4rem; }
            .top-bar-badge { display: none; }
        }
    </style>
</head>
<body>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="top-bar-inner">
            <a href="/">Workflow Partners</a>
            <span class="top-bar-badge">Free Diagnostic</span>
        </div>
    </div>

    <!-- Progress -->
    <div class="progress-wrap">
        <div class="progress-inner">
            <div class="progress-bar-track">
                <div class="progress-bar-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">Step 1 of 8</div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Analysing your workflows...</div>
        <div class="loading-sub">Our AI is calculating costs and building your transformation plan</div>
    </div>

    <div class="page-container">

        <!-- Hero -->
        <div class="diag-hero" id="heroSection">
            <h1>Discover What's Actually Broken</h1>
            <p class="diag-hero-sub">Answer a few evidence-based questions. Our AI translates your symptoms into specific structural problems and a transformation plan.</p>
            <div class="diag-hero-stats">
                <div class="diag-hero-stat"><strong>8 min</strong><span>Assessment</span></div>
                <div class="diag-hero-stat"><strong>AI-Powered</strong><span>Root cause analysis</span></div>
                <div class="diag-hero-stat"><strong>Free</strong><span>Full report</span></div>
            </div>
        </div>

        <!-- ===== SECTION 1: Workflow Timing ===== -->
        <div class="section active" id="section1">
            <div class="section-card">
                <div class="section-num">Section 1 of 8</div>
                <h2>Workflow Timing</h2>
                <p>How long do your core processes actually take versus how long they should?</p>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="actualTime">Actual cycle time (days)</label>
                            <div class="input-with-unit">
                                <input type="number" id="actualTime" placeholder="e.g., 14" min="0" step="0.5">
                                <span class="input-unit">days</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="idealTime">Ideal cycle time (days)</label>
                            <div class="input-with-unit">
                                <input type="number" id="idealTime" placeholder="e.g., 5" min="0" step="0.5">
                                <span class="input-unit">days</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="waitTime">Longest wait / delay (days)</label>
                            <div class="input-with-unit">
                                <input type="number" id="waitTime" placeholder="e.g., 3" min="0" step="0.5">
                                <span class="input-unit">days</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="waitFrequency">How often does this happen?</label>
                            <select id="waitFrequency">
                                <option value="">Select frequency...</option>
                                <option value="rarely">Rarely (monthly)</option>
                                <option value="weekly">Weekly</option>
                                <option value="daily">Daily</option>
                                <option value="multiple">Multiple times daily</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <div></div>
                <button class="button button-primary" onclick="nextSection(2)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 2: Coordination Overhead ===== -->
        <div class="section" id="section2">
            <div class="section-card">
                <div class="section-num">Section 2 of 8</div>
                <h2>Coordination Overhead</h2>
                <p>How much time does your team spend aligning instead of executing?</p>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="meetingHours">Hours/week in status meetings</label>
                            <div class="input-with-unit">
                                <input type="number" id="meetingHours" placeholder="e.g., 8" min="0" step="0.5">
                                <span class="input-unit">hrs/wk</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="meetingPeople">Average people per meeting</label>
                            <div class="input-with-unit">
                                <input type="number" id="meetingPeople" placeholder="e.g., 5" min="1">
                                <span class="input-unit">people</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(1)">&larr; Back</button>
                <button class="button button-primary" onclick="nextSection(3)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 3: Information Access ===== -->
        <div class="section" id="section3">
            <div class="section-card">
                <div class="section-num">Section 3 of 8</div>
                <h2>Information Access &amp; Data Quality</h2>
                <p>How easily can your team find what they need and trust what they find?</p>

                <div class="question-group">
                    <div class="input-group">
                        <label class="input-label" for="searchTime">Minutes/day searching for information (per person)</label>
                        <div class="input-with-unit">
                            <input type="number" id="searchTime" placeholder="e.g., 20" min="0">
                            <span class="input-unit">min/day</span>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-label">How often is data inconsistent across systems?</div>
                    <div class="option-grid">
                        <label class="option-card">
                            <input type="radio" name="dataInconsistent" value="rarely">
                            <div class="option-inner">Rarely</div>
                        </label>
                        <label class="option-card">
                            <input type="radio" name="dataInconsistent" value="sometimes">
                            <div class="option-inner">Sometimes</div>
                        </label>
                        <label class="option-card">
                            <input type="radio" name="dataInconsistent" value="often">
                            <div class="option-inner">Often</div>
                        </label>
                        <label class="option-card">
                            <input type="radio" name="dataInconsistent" value="always">
                            <div class="option-inner">Always</div>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-group">
                        <label class="input-label" for="dataFigureOutTime">Minutes to resolve each data inconsistency</label>
                        <div class="input-with-unit">
                            <input type="number" id="dataFigureOutTime" placeholder="e.g., 10" min="0">
                            <span class="input-unit">minutes</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(2)">&larr; Back</button>
                <button class="button button-primary" onclick="nextSection(4)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 4: Integration Gaps ===== -->
        <div class="section" id="section4">
            <div class="section-card">
                <div class="section-num">Section 4 of 8</div>
                <h2>Integration Gaps</h2>
                <p>How much manual work bridges the gaps between your systems?</p>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="copyPaste">Manual data transfers/day</label>
                            <div class="input-with-unit">
                                <input type="number" id="copyPaste" placeholder="e.g., 15" min="0">
                                <span class="input-unit">/day</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="shadowSpreadsheets">Shadow spreadsheets maintained</label>
                            <div class="input-with-unit">
                                <input type="number" id="shadowSpreadsheets" placeholder="e.g., 3" min="0">
                                <span class="input-unit">sheets</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-group">
                        <label class="input-label" for="spreadsheetHours">Hours/week maintaining spreadsheets</label>
                        <div class="input-with-unit">
                            <input type="number" id="spreadsheetHours" placeholder="e.g., 4" min="0" step="0.5">
                            <span class="input-unit">hrs/wk</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(3)">&larr; Back</button>
                <button class="button button-primary" onclick="nextSection(5)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 5: Tools & Business Impact ===== -->
        <div class="section" id="section5">
            <div class="section-card">
                <div class="section-num">Section 5 of 8</div>
                <h2>Tools &amp; Business Impact</h2>
                <p>Your tool landscape and the downstream effect on the business.</p>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="toolCount">Tools used daily</label>
                            <input type="number" id="toolCount" placeholder="e.g., 6" min="0">
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="toolSwitches">Tool switches per day</label>
                            <input type="number" id="toolSwitches" placeholder="e.g., 20" min="0">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="reportHours">Hours spent on reporting</label>
                            <div class="input-with-unit">
                                <input type="number" id="reportHours" placeholder="e.g., 6" min="0" step="0.5">
                                <span class="input-unit">hours</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="reportFrequency">Reporting frequency</label>
                            <select id="reportFrequency">
                                <option value="">Select...</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="multiple">Multiple per day</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="onboardingWeeks">New hire onboarding (weeks)</label>
                            <div class="input-with-unit">
                                <input type="number" id="onboardingWeeks" placeholder="e.g., 4" min="0">
                                <span class="input-unit">weeks</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="missedOpportunities">Missed opportunities per quarter</label>
                            <input type="number" id="missedOpportunities" placeholder="e.g., 3" min="0">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="opportunityValue">Value per missed opportunity</label>
                            <div class="input-with-unit">
                                <input type="number" id="opportunityValue" placeholder="e.g., 5000" min="0">
                                <span class="input-unit">&pound;</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="crossDeptWork">Cross-department work style</label>
                            <select id="crossDeptWork">
                                <option value="">Select...</option>
                                <option value="seamless">Seamless collaboration</option>
                                <option value="handoff">Formal handoffs</option>
                                <option value="escalate">Requires escalation</option>
                                <option value="ad-hoc">Ad-hoc / informal</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(4)">&larr; Back</button>
                <button class="button button-primary" onclick="nextSection(6)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 6: Workflow Identification ===== -->
        <div class="section" id="section6">
            <div class="section-card">
                <div class="section-num">Section 6 of 8</div>
                <h2>Workflow Identification</h2>
                <p>Which critical workflows need improvement? We'll map these in detail.</p>

                <div class="question-group">
                    <div class="question-label">Your 3 most critical workflows</div>
                    <div class="question-help">We'll create swimlane diagrams for each of these.</div>

                    <div class="workflow-input-block">
                        <div class="workflow-input-row">
                            <div class="input-group" style="margin-bottom:0">
                                <label class="input-label">Workflow 1</label>
                                <input type="text" id="workflow1Name" placeholder="e.g., Customer Onboarding">
                            </div>
                            <div class="input-group" style="margin-bottom:0">
                                <label class="input-label">How does it happen?</label>
                                <select id="workflow1Type">
                                    <option value="">Select...</option>
                                    <option value="online">Mostly online</option>
                                    <option value="offline">Mostly offline</option>
                                    <option value="hybrid">Mix of both</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group" style="margin-bottom:0">
                            <label class="input-label">Departments involved</label>
                            <input type="text" id="workflow1Depts" placeholder="e.g., Sales, Operations, Finance">
                        </div>
                    </div>

                    <div class="workflow-input-block">
                        <div class="workflow-input-row">
                            <div class="input-group" style="margin-bottom:0">
                                <label class="input-label">Workflow 2</label>
                                <input type="text" id="workflow2Name" placeholder="e.g., Deal Approval">
                            </div>
                            <div class="input-group" style="margin-bottom:0">
                                <label class="input-label">How does it happen?</label>
                                <select id="workflow2Type">
                                    <option value="">Select...</option>
                                    <option value="online">Mostly online</option>
                                    <option value="offline">Mostly offline</option>
                                    <option value="hybrid">Mix of both</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group" style="margin-bottom:0">
                            <label class="input-label">Departments involved</label>
                            <input type="text" id="workflow2Depts" placeholder="e.g., Sales, Finance, Leadership">
                        </div>
                    </div>

                    <div class="workflow-input-block">
                        <div class="workflow-input-row">
                            <div class="input-group" style="margin-bottom:0">
                                <label class="input-label">Workflow 3 (optional)</label>
                                <input type="text" id="workflow3Name" placeholder="e.g., Employee Onboarding">
                            </div>
                            <div class="input-group" style="margin-bottom:0">
                                <label class="input-label">How does it happen?</label>
                                <select id="workflow3Type">
                                    <option value="">Select...</option>
                                    <option value="online">Mostly online</option>
                                    <option value="offline">Mostly offline</option>
                                    <option value="hybrid">Mix of both</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group" style="margin-bottom:0">
                            <label class="input-label">Departments involved</label>
                            <input type="text" id="workflow3Depts" placeholder="e.g., HR, IT, Operations">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-label">Where does information flow?</div>
                    <div class="question-help">Select all channels used for these workflows.</div>
                    <div class="checkbox-grid">
                        <label class="checkbox-label"><input type="checkbox" value="email" name="channels"><span class="checkbox-text">Email</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="slack" name="channels"><span class="checkbox-text">Slack</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="teams" name="channels"><span class="checkbox-text">Microsoft Teams</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="crm" name="channels"><span class="checkbox-text">CRM</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="project" name="channels"><span class="checkbox-text">Project Tools</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="spreadsheets" name="channels"><span class="checkbox-text">Spreadsheets</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="meetings" name="channels"><span class="checkbox-text">In-person Meetings</span></label>
                        <label class="checkbox-label"><input type="checkbox" value="calls" name="channels"><span class="checkbox-text">Phone Calls</span></label>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(5)">&larr; Back</button>
                <button class="button button-primary" onclick="nextSection(7)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 7: Tool Connection Consent ===== -->
        <div class="section" id="section7">
            <div class="section-card">
                <div class="section-num">Section 7 of 8</div>
                <h2>Automated Workflow Mapping</h2>
                <p>Optionally connect your tools so we can auto-generate precise swimlane diagrams in 3 days instead of 6-8 weeks.</p>

                <div class="consent-hero">
                    <div class="consent-icon">&#128640;</div>
                    <div class="consent-title">Auto-Map Your Workflows</div>
                    <p class="consent-subtitle">Connect your tools and we'll create visual diagrams showing exactly where time is lost.</p>
                </div>

                <div class="question-group">
                    <div class="question-label">Select tools to connect</div>
                    <div class="tool-consent-grid">
                        <label class="tool-consent-card">
                            <input type="checkbox" id="consentGmail" name="toolConsent">
                            <div class="tool-consent-content">
                                <div class="tool-consent-header">
                                    <span class="tool-consent-icon">&#128231;</span>
                                    <span class="tool-consent-name">Gmail / Outlook</span>
                                </div>
                                <div class="tool-consent-description">Map email workflows, detect handoff patterns, measure response times</div>
                                <div class="tool-consent-badge">Read-only access</div>
                            </div>
                        </label>
                        <label class="tool-consent-card">
                            <input type="checkbox" id="consentSlack" name="toolConsent">
                            <div class="tool-consent-content">
                                <div class="tool-consent-header">
                                    <span class="tool-consent-icon">&#128172;</span>
                                    <span class="tool-consent-name">Slack</span>
                                </div>
                                <div class="tool-consent-description">Identify triggers, measure delays, find communication bottlenecks</div>
                                <div class="tool-consent-badge">Read-only access</div>
                            </div>
                        </label>
                        <label class="tool-consent-card">
                            <input type="checkbox" id="consentCRM" name="toolConsent">
                            <div class="tool-consent-content">
                                <div class="tool-consent-header">
                                    <span class="tool-consent-icon">&#128200;</span>
                                    <span class="tool-consent-name">CRM</span>
                                </div>
                                <div class="tool-consent-description">Analyse pipeline stages, conversion times, and stage delays</div>
                                <div class="tool-consent-badge">Read-only access</div>
                            </div>
                        </label>
                        <label class="tool-consent-card">
                            <input type="checkbox" id="consentCalendar" name="toolConsent">
                            <div class="tool-consent-content">
                                <div class="tool-consent-header">
                                    <span class="tool-consent-icon">&#128197;</span>
                                    <span class="tool-consent-name">Calendar</span>
                                </div>
                                <div class="tool-consent-description">Measure meeting overhead, coordination costs, time allocation</div>
                                <div class="tool-consent-badge">Read-only access</div>
                            </div>
                        </label>
                    </div>

                    <div class="privacy-notice">
                        <div class="privacy-icon">&#128274;</div>
                        <div class="privacy-content">
                            <strong>Privacy &amp; Security</strong>
                            <ul>
                                <li>Read-only access &mdash; we never write or modify</li>
                                <li>Revoke access anytime from your tool settings</li>
                                <li>Data encrypted in transit and at rest</li>
                                <li>Auto-deleted after 7 days</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="alternative-option">
                        <div class="alternative-header">
                            <span class="alternative-icon">&#128221;</span>
                            <strong>Prefer not to connect tools?</strong>
                        </div>
                        <p>We'll send you a 5-minute guided survey to map workflows manually.</p>
                        <label class="checkbox-label" style="display:inline-flex">
                            <input type="checkbox" id="preferManual">
                            <span class="checkbox-text">Skip tool connection, use guided survey</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(6)">&larr; Back</button>
                <button class="button button-primary" onclick="nextSection(8)">Continue &rarr;</button>
            </div>
        </div>

        <!-- ===== SECTION 8: Contact Information ===== -->
        <div class="section" id="section8">
            <div class="section-card">
                <div class="section-num">Section 8 of 8</div>
                <h2>Your Details</h2>
                <p>Where should we send your personalised diagnostic report?</p>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="name">Full name</label>
                            <input type="text" id="name" placeholder="Jane Smith" required>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="email">Work email</label>
                            <input type="email" id="email" placeholder="jane@company.com" required>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-row">
                        <div class="input-group">
                            <label class="input-label" for="company">Company name</label>
                            <input type="text" id="company" placeholder="Acme Corp" required>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="teamSize">Team size</label>
                            <select id="teamSize" required>
                                <option value="">Select...</option>
                                <option value="5">1-10</option>
                                <option value="25">11-50</option>
                                <option value="75">51-100</option>
                                <option value="150">101-250</option>
                                <option value="500">250+</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="input-group">
                        <label class="input-label" for="industry">Industry</label>
                        <select id="industry">
                            <option value="">Select...</option>
                            <option value="Technology">Technology</option>
                            <option value="Financial Services">Financial Services</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Manufacturing">Manufacturing</option>
                            <option value="Professional Services">Professional Services</option>
                            <option value="Retail & E-commerce">Retail &amp; E-commerce</option>
                            <option value="Real Estate">Real Estate</option>
                            <option value="Education">Education</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="button button-secondary" onclick="previousSection(7)">&larr; Back</button>
                <button class="button button-submit" onclick="generateAnalysis()">Generate My Diagnostic &rarr;</button>
            </div>
        </div>

        <!-- ===== RESULTS ===== -->
        <div id="results"></div>

    </div>

    <!-- Footer -->
    <div class="diag-footer">
        <p>&copy; 2026 Workflow Partners &middot; <a href="/">Back to homepage</a></p>
    </div>

    <script>
        const TOTAL_SECTIONS = 8;
        let currentSection = 1;

        function updateProgress() {
            const pct = ((currentSection - 1) / (TOTAL_SECTIONS - 1)) * 100;
            document.getElementById('progressBar').style.width = pct + '%';
            document.getElementById('progressText').textContent = `Step ${currentSection} of ${TOTAL_SECTIONS}`;
        }

        function showSection(n) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            const target = document.getElementById('section' + n);
            if (target) target.classList.add('active');
            currentSection = n;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Hide hero after section 1
            const hero = document.getElementById('heroSection');
            hero.style.display = n > 1 ? 'none' : '';
        }

        function nextSection(n) { showSection(n); }
        function previousSection(n) { showSection(n); }

        function getRadioValue(name) {
            const el = document.querySelector(`input[name="${name}"]:checked`);
            return el ? el.value : '';
        }

        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('visible');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('visible');
        }

        async function generateAnalysis() {
            showLoading();

            const evidence = {
                actualTime: parseFloat(document.getElementById('actualTime').value) || 0,
                idealTime: parseFloat(document.getElementById('idealTime').value) || 0,
                waitTime: parseFloat(document.getElementById('waitTime').value) || 0,
                waitFrequency: document.getElementById('waitFrequency').value,
                meetingHours: parseFloat(document.getElementById('meetingHours').value) || 0,
                meetingPeople: parseFloat(document.getElementById('meetingPeople').value) || 0,
                searchTime: parseFloat(document.getElementById('searchTime').value) || 0,
                dataInconsistent: getRadioValue('dataInconsistent'),
                dataFigureOutTime: parseFloat(document.getElementById('dataFigureOutTime').value) || 0,
                copyPaste: parseFloat(document.getElementById('copyPaste').value) || 0,
                shadowSpreadsheets: parseFloat(document.getElementById('shadowSpreadsheets').value) || 0,
                spreadsheetHours: parseFloat(document.getElementById('spreadsheetHours').value) || 0,
                toolCount: parseFloat(document.getElementById('toolCount').value) || 0,
                toolSwitches: parseFloat(document.getElementById('toolSwitches').value) || 0,
                reportHours: parseFloat(document.getElementById('reportHours').value) || 0,
                reportFrequency: document.getElementById('reportFrequency').value,
                onboardingWeeks: parseFloat(document.getElementById('onboardingWeeks').value) || 0,
                missedOpportunities: parseFloat(document.getElementById('missedOpportunities').value) || 0,
                opportunityValue: parseFloat(document.getElementById('opportunityValue').value) || 0,
                crossDeptWork: document.getElementById('crossDeptWork').value
            };

            const workflows = [
                { name: document.getElementById('workflow1Name').value, type: document.getElementById('workflow1Type').value, departments: document.getElementById('workflow1Depts').value.split(',').map(d => d.trim()).filter(Boolean) },
                { name: document.getElementById('workflow2Name').value, type: document.getElementById('workflow2Type').value, departments: document.getElementById('workflow2Depts').value.split(',').map(d => d.trim()).filter(Boolean) },
                { name: document.getElementById('workflow3Name').value, type: document.getElementById('workflow3Type').value, departments: document.getElementById('workflow3Depts').value.split(',').map(d => d.trim()).filter(Boolean) }
            ].filter(wf => wf.name);

            const channels = Array.from(document.querySelectorAll('input[name="channels"]:checked')).map(cb => cb.value);

            const toolConsent = {
                gmail: document.getElementById('consentGmail').checked,
                slack: document.getElementById('consentSlack').checked,
                crm: document.getElementById('consentCRM').checked,
                calendar: document.getElementById('consentCalendar').checked,
                preferManual: document.getElementById('preferManual').checked
            };

            const contact = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                company: document.getElementById('company').value,
                teamSize: parseInt(document.getElementById('teamSize').value) || 25,
                industry: document.getElementById('industry').value
            };

            try {
                const resp = await fetch('/api/analyze-symptoms', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ evidence, workflows, channels, toolConsent, contact })
                });

                if (!resp.ok) throw new Error('Analysis failed');

                const data = await resp.json();
                hideLoading();
                displayResults(data);
            } catch (err) {
                hideLoading();
                console.error('Analysis error:', err);
                alert('Analysis failed. Please try again or contact support.');
            }
        }

        function displayResults(data) {
            // Hide form sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('heroSection').style.display = 'none';
            document.getElementById('progressBar').style.width = '100%';
            document.getElementById('progressText').textContent = 'Complete';

            const a = data.analysis;
            const m = data.metrics;
            const resultsDiv = document.getElementById('results');

            let html = `
                <div class="result-header">
                    <div class="score-ring"><span class="score-ring-value">${a.healthScore || 'â€”'}</span></div>
                    <h2>Your Operational Diagnostic</h2>
                    <p>${a.executiveSummary || ''}</p>
                    <div style="margin-top:0.75rem"><span class="urgency-badge ${(a.urgencyLevel || '').toLowerCase()}">${a.urgencyLevel || 'N/A'} urgency</span></div>
                </div>
            `;

            // Costs
            if (m && m.costs) {
                html += `<div class="result-card"><h3>Annual Cost Breakdown</h3>
                    <div class="cost-grid">`;
                const labels = { meetingCost: 'Meetings', searchCost: 'Information Search', transferCost: 'Manual Transfers', spreadsheetCost: 'Shadow Systems', reportCost: 'Reporting', opportunityCost: 'Missed Revenue' };
                for (const [key, val] of Object.entries(m.costs)) {
                    html += `<div class="cost-item"><div class="cost-item-label">${labels[key] || key}</div><div class="cost-item-value">&pound;${Math.round(val.annual).toLocaleString()}</div></div>`;
                }
                html += `<div class="cost-item" style="grid-column:1/-1;background:var(--primary);border:none;"><div class="cost-item-label" style="color:rgba(255,255,255,0.7)">Total Annual Cost</div><div class="cost-item-value" style="color:#fff">&pound;${Math.round(m.totalCost).toLocaleString()}</div></div>`;
                html += `</div></div>`;
            }

            // Operating Model
            if (a.operatingModel) {
                html += `<div class="result-card"><h3>Operating Model: ${a.operatingModel.pattern || ''}</h3>
                    <p>${a.operatingModel.description || ''}</p>
                    ${a.operatingModel.whyThisMatters ? `<p style="margin-top:0.5rem"><strong>Why it matters:</strong> ${a.operatingModel.whyThisMatters}</p>` : ''}
                </div>`;
            }

            // Root Causes
            if (a.rootCauses && a.rootCauses.length) {
                html += `<div class="result-card"><h3>Root Causes</h3><ul>`;
                a.rootCauses.forEach(rc => {
                    html += `<li><strong>${rc.title}</strong> &mdash; ${rc.description}</li>`;
                });
                html += `</ul></div>`;
            }

            // Transformation Plan
            if (a.transformationPlan && a.transformationPlan.phases) {
                html += `<div class="result-card"><h3>Transformation Plan</h3>
                    <p style="margin-bottom:0.75rem">${a.transformationPlan.overview || ''}</p>`;
                a.transformationPlan.phases.forEach(ph => {
                    html += `<div class="phase-card"><div class="phase-num">Phase ${ph.phase}</div><h4>${ph.title}</h4><p>${ph.expectedImpact || ph.objective || ''}</p></div>`;
                });
                html += `</div>`;
            }

            // Next Steps
            if (a.nextSteps) {
                html += `<div class="result-card"><h3>Next Steps</h3><ul>`;
                if (a.nextSteps.immediate) html += `<li>${a.nextSteps.immediate}</li>`;
                if (a.nextSteps.timeline) html += `<li>${a.nextSteps.timeline}</li>`;
                if (a.nextSteps.recommendation) html += `<li>${a.nextSteps.recommendation}</li>`;
                html += `</ul></div>`;
            }

            resultsDiv.innerHTML = html;
            resultsDiv.classList.add('visible');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Init
        updateProgress();
    </script>
</body>
</html>
